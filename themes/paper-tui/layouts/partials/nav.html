{{ $visibleMenuItems := 0 }}
{{ range .Site.Menus.main }}
  {{ $page := $.Site.GetPage .URL }}
  {{ if $page }}
    {{ if $page.IsSection }}
      {{ if gt (len $page.RegularPages) 0 }}
        {{ $visibleMenuItems = add $visibleMenuItems 1 }}
      {{ end }}
    {{ else }}
      {{ $visibleMenuItems = add $visibleMenuItems 1 }}
    {{ end }}
  {{ end }}
{{ end }}
{{ if gt $visibleMenuItems 0 }}
<nav class="fixed top-6 left-6 flex items-center gap-6 z-[100]">
  <a href="/" class="text-text transition-colors pb-1 {{ if .IsHome }}border-b-2 border-text{{ end }}" title="Home">
    <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor">
      <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>
    </svg>
  </a>
  {{ range .Site.Menus.main }}
  {{ $page := $.Site.GetPage .URL }}
  {{ $hasContent := false }}
  {{ if $page }}
    {{ if $page.IsSection }}
      {{ $hasContent = gt (len $page.RegularPages) 0 }}
    {{ else }}
      {{ $hasContent = true }}
    {{ end }}
  {{ end }}
  {{ if $hasContent }}
  {{ $active := hasPrefix $.RelPermalink .URL }}
  <a href="{{ .URL }}" class="text-text transition-colors text-base no-underline pb-1 {{ if $active }}border-b-2 border-text{{ end }}">{{ .Name }}</a>
  {{ end }}
  {{ end }}
</nav>
{{ end }}
